{"version":3,"sources":["webpack:///./src/utils/tokenUtils.js","webpack:///./src/views/hello.vue?94f6","webpack:///src/views/hello.vue","webpack:///./src/views/hello.vue?b632","webpack:///./src/views/hello.vue","webpack:///./src/utils/service.js","webpack:///./src/utils/request.js","webpack:///./src/api/pjm_module.js"],"names":["name","setToken","token","localStorage","setItem","getToken","getItem","undefined","length","setUsername","username","getUsername","render","_vm","this","_h","$createElement","_c","_self","attrs","on","request","_v","getUserName","_s","requestresult","UserName","staticRenderFns","component","callService","url","params","htmlname","baseUrl","tokenUtil","data","JSON","stringify","config","method","headers","axios","then","response","console","log","res","code","Message","message","msg","type","duration","Promise","reject","catch","error","_error","service","create","baseURL","timeout","interceptors","use","MessageBox","confirm","confirmButtonText","cancelButtonText","store","dispatch","location","reload","Error","login","pjmapi","param","pjmapi4g"],"mappings":"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","file":"js/chunk-7aac8f6b.fe5a5684.js","sourcesContent":["export default {\r\n    name: 'tokenUtil',\r\n    setToken(token) {\r\n        localStorage.setItem(\"Authorization\", token)\r\n    },\r\n    getToken() {\r\n        var token = localStorage.getItem(\"Authorization\")\r\n        if (token == undefined || token.length == 0) {\r\n            return ''\r\n        }\r\n        return token\r\n    },\r\n    setUsername(username) {\r\n        localStorage.setItem(\"username\", username)\r\n    },\r\n    getUsername() {\r\n        var username = localStorage.getItem(\"username\")\r\n        if (username == undefined || username.length == 0) {\r\n            return ''\r\n        }\r\n        return username\r\n    }\r\n\r\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('el-button',{on:{\"click\":_vm.request}},[_vm._v(\"request\")]),_c('el-button',{on:{\"click\":_vm.getUserName}},[_vm._v(\"getusername\")]),_c('el-button',[_vm._v(\"12121\")]),_c('Button',[_vm._v(\"121212\")]),_c('div',[_vm._v(_vm._s(_vm.requestresult))]),_c('div',[_vm._v(_vm._s(_vm.UserName))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"app\">\n        <el-button @click=\"request\">request</el-button>\n        <el-button @click=\"getUserName\">getusername</el-button>\n        <el-button>12121</el-button>\n        <Button>121212</Button>\n        <div>{{ requestresult }}</div>\n        <div>{{ UserName }}</div>\n    </div>\n</template>\n\n<script>\nimport pjmapi from '../api/pjm_module.js';\nexport default {\n    name: 'hello',\n    data() {\n        return {\n            UserName: '',\n            requestresult: ''\n        };\n    },\n    created() {\n        console.log(this.$router);\n    },\n    methods: {\n        getUserName() {\n            this.UserName = this.$store.getters.getUserName;\n        },\n        request() {\n            var param = {\n                id: '1'\n            };\n            pjmapi.pjmapi(param, 'member/details', 'hello').then(res => {\n                console.log(res);\n                this.requestresult = res.data.memberName;\n            });\n        }\n    }\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./hello.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./hello.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./hello.vue?vue&type=template&id=8791ac18&\"\nimport script from \"./hello.vue?vue&type=script&lang=js&\"\nexport * from \"./hello.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import axios from 'axios'\r\nimport {\r\n    Message\r\n} from 'element-ui'\r\nimport tokenUtil from './tokenUtils.js'\r\n\r\nexport function callService(url, params, htmlname) {\r\n    let baseUrl = 'http://47.94.233.146:1220/'\r\n    if (tokenUtil.getToken() || tokenUtil.getUsername() || url == \"pjm-service-user/user/login\") {\r\n        const data = JSON.stringify(params)\r\n        const config = {\r\n            url: baseUrl + url,\r\n            // timeout: 5000,\r\n            method: 'post',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': tokenUtil.getToken(),\r\n                'username': tokenUtil.getUsername(),\r\n                'htmlname': htmlname\r\n            },\r\n            data\r\n        }\r\n        return axios(config).then(response => {\r\n            console.log(response)\r\n            const res = response.data\r\n            console.log(\"service.js\")\r\n            if (res && (res.code === 0 || res.code === '0')) {\r\n                // alert(\"codesuccess\")\r\n                return res\r\n            } else {\r\n                // if (res.data) {\r\n                //     // alert(\"datasuccess\")\r\n                //     return Promise.reject(res)\r\n                // } else {\r\n                //     // console.log((res && res.msg) ? res.msg : '')\r\n                //     return Promise.reject((res && res.msg) ? res.msg : '')\r\n                // }\r\n                Message({\r\n                    message: response.msg,\r\n                    type: 'error',\r\n                    duration: 5 * 1000\r\n                })\r\n                return Promise.reject(response.msg)\r\n            }\r\n        }).catch(function(error) {\r\n            console.log(error)\r\n            if (error) {\r\n                const _error = error\r\n                if (!error.data) {\r\n                    Message({\r\n                        message: _error,\r\n                        type: 'error',\r\n                        duration: 3 * 1000\r\n                    })\r\n                }\r\n                return Promise.reject(_error)\r\n            } else {\r\n                Message({\r\n                    message: '服务有问题, 请联系管理员~',\r\n                    type: 'error',\r\n                    duration: 5 * 1000\r\n                })\r\n                return Promise.reject('服务有问题, 请联系管理员~')\r\n            }\r\n        })\r\n    } else {\r\n        Message({\r\n            message: '登录过期了',\r\n            type: 'error',\r\n            duration: 5 * 1000\r\n        })\r\n        return Promise.reject('登录过期了')\r\n    }\r\n}\n","import axios from 'axios'\r\nimport {\r\n    Message,\r\n    MessageBox\r\n} from 'element-ui'\r\nimport store from '@/store'\r\nimport tokenUtil from './tokenUtils.js'\r\n\r\n// create an axios instance\r\nconst service = axios.create({\r\n    baseURL: 'http://47.94.233.146:1220/', // url = base url + request url\r\n    // withCredentials: true, // send cookies when cross-domain requests\r\n    timeout: 50000 // request timeout\r\n})\r\n\r\n// request interceptor\r\nservice.interceptors.request.use(\r\n    config => {\r\n        // do something before request is sent\r\n\r\n        if (tokenUtil.getToken()) {\r\n            // let each request carry token\r\n            // ['X-Token'] is a custom headers key\r\n            // please modify it according to the actual situation\r\n            config.headers['Authorization'] = tokenUtil.getToken()\r\n            config.headers['username'] = tokenUtil.getUsername()\r\n        }\r\n        return config\r\n    },\r\n    error => {\r\n        // do something with request error\r\n        console.log(error) // for debug\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n\r\n// response interceptor\r\nservice.interceptors.response.use(\r\n    /**\r\n     * If you want to get http information such as headers or status\r\n     * Please return  response => response\r\n     */\r\n\r\n    /**\r\n     * Determine the request status by custom code\r\n     * Here is just an example\r\n     * You can also judge the status by HTTP Status Code\r\n     */\r\n    response => {\r\n\r\n        const res = response.data\r\n        if (res.code == '0' || res.code == 200) {\r\n            console.log('requesetsuccess-----', res)\r\n            return res\r\n        } else {\r\n            if (res.code === '403') {\r\n                // to re-login\r\n                MessageBox.confirm('你的登陆已经过期，请重新登陆！', '重新登陆', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning'\r\n                }).then(() => {\r\n                    store.dispatch('login').then(() => {\r\n                        location.reload()\r\n                    })\r\n                })\r\n            } else {\r\n                // 其它错误弹出错误信息\r\n                Message({\r\n                    message: res.msg || 'Error',\r\n                    type: 'error',\r\n                    duration: 5 * 1000\r\n                })\r\n            }\r\n            console.log('requeset-----', res)\r\n            return Promise.reject(new Error(res.msg || 'Error'))\r\n        }\r\n    },\r\n    error => {\r\n        console.log('err' + error) // for debug\r\n        Message({\r\n            message: error.msg || 'Error',\r\n            type: 'error',\r\n            duration: 5 * 1000\r\n        })\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n\r\nexport default service\n","import * as service from '../utils/service.js'\r\nimport request from '../utils/request.js'\n\r\nexport default {\r\n    name: 'pjmapi',\r\n    login(params, htmlname) {\r\n        return service.callService('/user/login', params, htmlname)\r\n    },\r\n    pjmapi(param, url, htmlname) {\r\n        let res = request({\r\n            url,\r\n            method: 'post',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'htmlname':htmlname\r\n            },\r\n            data: JSON.stringify(param),\r\n        })\r\n        return res\r\n    },\n    pjmapi4g(url, htmlname) {\n        let res = request({\n            url,\n            method: 'get',\n            headers: {\n                'Content-Type': 'application/json',\n                'htmlname':htmlname\n            }\n        })\n        return res\n    },\r\n}\n"],"sourceRoot":""}