(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-273bd3af"],{"039a":function(e,t,r){"use strict";var o=r("7174"),n=r.n(o);n.a},"094b":function(e,t,r){"use strict";t["a"]={name:"tokenUtil",setToken:function(e){localStorage.setItem("Authorization",e)},getToken:function(){var e=localStorage.getItem("Authorization");return void 0==e||0==e.length?"":e},setUsername:function(e){localStorage.setItem("username",e)},getUsername:function(){var e=localStorage.getItem("username");return void 0==e||0==e.length?"":e}}},"0a36":function(e,t,r){e.exports=r.p+"img/bg03.93edc1b5.jpg"},"0f18":function(e,t,r){e.exports=r.p+"img/bg00.3335388f.jpg"},1064:function(e,t,r){e.exports=r.p+"img/bg06.19ecc464.jpg"},"1cda":function(e,t,r){e.exports=r.p+"img/bg04.dff7ddf2.jpg"},"40ec":function(e,t,r){var o={"./bg00.jpg":"0f18","./bg01.jpg":"695e","./bg02.jpg":"8539","./bg03.jpg":"0a36","./bg04.jpg":"1cda","./bg05.jpg":"8bb6","./bg06.jpg":"1064"};function n(e){var t=a(e);return r(t)}function a(e){if(!r.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=a,e.exports=n,n.id="40ec"},"56b8":function(e,t,r){"use strict";r("d3b7");var o=r("bc3a"),n=r.n(o),a=r("5c96"),s=r("094b");function i(e,t,r){var o="http://47.94.233.146:1220/";if(s["a"].getToken()||s["a"].getUsername()||"pjm-service-user/user/login"==e){var i=JSON.stringify(t),c={url:o+e,method:"post",headers:{"Content-Type":"application/json",Authorization:s["a"].getToken(),username:s["a"].getUsername(),htmlname:r},data:i};return n()(c).then((function(e){console.log(e);var t=e.data;return console.log("service.js"),!t||0!==t.code&&"0"!==t.code?(Object(a["Message"])({message:e.msg,type:"error",duration:5e3}),Promise.reject(e.msg)):t})).catch((function(e){if(console.log(e),e){var t=e;return e.data||Object(a["Message"])({message:t,type:"error",duration:3e3}),Promise.reject(t)}return Object(a["Message"])({message:"服务有问题, 请联系管理员~",type:"error",duration:5e3}),Promise.reject("服务有问题, 请联系管理员~")}))}return Object(a["Message"])({message:"登录过期了",type:"error",duration:5e3}),Promise.reject("登录过期了")}var c=r("4360"),u=n.a.create({baseURL:"http://47.94.233.146:1220/",timeout:5e4});u.interceptors.request.use((function(e){return s["a"].getToken()&&(e.headers["Authorization"]=s["a"].getToken(),e.headers["username"]=s["a"].getUsername()),e}),(function(e){return console.log(e),Promise.reject(e)})),u.interceptors.response.use((function(e){var t=e.data;return"0"==t.code||200==t.code?(console.log("requesetsuccess-----",t),t):("403"===t.code?a["MessageBox"].confirm("你的登陆已经过期，请重新登陆！","重新登陆",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){c["a"].dispatch("login").then((function(){location.reload()}))})):Object(a["Message"])({message:t.msg||"Error",type:"error",duration:5e3}),console.log("requeset-----",t),Promise.reject(new Error(t.msg||"Error")))}),(function(e){return console.log("err"+e),Object(a["Message"])({message:e.msg||"Error",type:"error",duration:5e3}),Promise.reject(e)}));var g=u;t["a"]={name:"pjmapi",login:function(e,t){return i("/user/login",e,t)},pjmapi:function(e,t,r){var o=g({url:t,method:"post",headers:{"Content-Type":"application/json",htmlname:r},data:JSON.stringify(e)});return o},pjmapi4g:function(e,t){var r=g({url:e,method:"get",headers:{"Content-Type":"application/json",htmlname:t}});return r}}},"578a":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-vue",style:e.bg},[r("div",{staticClass:"container"},[r("p",{staticClass:"title"},[e._v("WELCOME")]),r("div",{staticClass:"input-c"},[r("Input",{attrs:{prefix:"ios-contact",placeholder:"用户名",clearable:""},on:{"on-blur":e.verifyAccount},model:{value:e.account,callback:function(t){e.account=t},expression:"account"}}),r("p",{staticClass:"error"},[e._v(e._s(e.accountError))])],1),r("div",{staticClass:"input-c"},[r("Input",{attrs:{type:"password",prefix:"md-lock",placeholder:"密码",clearable:""},on:{"on-blur":e.verifyPwd},model:{value:e.pwd,callback:function(t){e.pwd=t},expression:"pwd"}}),r("p",{staticClass:"error"},[e._v(e._s(e.pwdError))])],1),r("Button",{staticClass:"submit",attrs:{loading:e.isShowLoading,type:"primary"},on:{click:e.submit}},[e._v("登陆")]),r("p",{staticClass:"account"},[r("span",{on:{click:e.register}},[e._v("注册账号")]),e._v(" | "),r("span",{on:{click:e.forgetPwd}},[e._v("忘记密码")])])],1)])},n=[],a=r("094b"),s=r("56b8"),i=(r("9fdf"),r("a18c"),{name:"Login",data:function(){return{account:"",pwd:"",accountError:"",pwdError:"",isShowLoading:!1,bg:{}}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},created:function(){this.bg.backgroundImage="url("+r("40ec")("./bg0"+(new Date).getDay()+".jpg")+")"},methods:{verifyAccount:function(){""==this.account?this.accountError="请输入账号":this.accountError=""},verifyPwd:function(){""==this.pwd?this.pwdError="请输入密码":this.pwdError=""},register:function(){},forgetPwd:function(){},submit:function(){var e=this,t={userAccount:this.account,userPassword:this.pwd};s["a"].pjmapi(t,"pjm-service-user/user/login","login").then((function(t){"200"==t.code?(e.isShowLoading=!0,localStorage.setItem("userImg","http://39.105.78.171:1250"+t.data.userHeader),localStorage.setItem("userName",t.data.userName),localStorage.setItem("Authorization",t.data.token),a["a"].setToken(t.msg),a["a"].setUsername(t.data.userAccount),s["a"].pjmapi({},"pjm-service-user/user/init","login").then((function(t){e.$store.commit("setUserName",t.data.userName),e.$store.commit("setPermissionList",t.data.permissionList),e.$store.commit("setRoleList",t.data.roleList),e.$store.commit("setUserInfo",t.data),console.log("准备进入主页"),e.$router.push({path:"/"})}))):e.$notify({message:t.msg})}))}}}),c=i,u=(r("039a"),r("2877")),g=Object(u["a"])(c,o,n,!1,null,null,null);t["default"]=g.exports},"695e":function(e,t,r){e.exports=r.p+"img/bg01.d86eb1d6.jpg"},7174:function(e,t,r){},8539:function(e,t,r){e.exports=r.p+"img/bg02.075e05b6.jpg"},"8bb6":function(e,t,r){e.exports=r.p+"img/bg05.a951ce20.jpg"}}]);
//# sourceMappingURL=chunk-273bd3af.63316897.js.map